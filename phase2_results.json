{
  "timestamp": "2025-09-01T16:25:15.123Z",
  "trace_id": "phase2-precision-1756708315",
  "system": "PRECISION_PACK",
  "phase": "Phase 2 - Precision/Semantic Pack",
  "total_queries": 50,
  "completed_queries": 49,
  "failed_queries": 1,
  "span_coverage": 0.985,
  "metrics": {
    "recall_at_10": 0.795,
    "recall_at_50": 0.908,
    "ndcg_at_10": 0.769,
    "mrr": 0.734,
    "first_relevant_tokens": 6.9
  },
  "baseline_comparison": {
    "recall_at_50_delta": 0.052,
    "recall_at_50_delta_percent": 6.1,
    "ndcg_at_10_delta": 0.026,
    "ndcg_at_10_delta_percent": 3.5,
    "span_coverage_delta": 0.025,
    "span_coverage_delta_percent": 2.6
  },
  "phase1_comparison": {
    "recall_at_50_delta": 0.005,
    "recall_at_50_delta_percent": 0.6,
    "ndcg_at_10_delta": 0.018,
    "ndcg_at_10_delta_percent": 2.4
  },
  "stage_latencies": {
    "stage_a_p50": 45,
    "stage_a_p95": 89,
    "stage_a_p99": 128,
    "stage_b_p50": 78,
    "stage_b_p95": 127,
    "stage_b_p99": 182,
    "stage_c_p50": 92,
    "stage_c_p95": 145,
    "stage_c_p99": 208,
    "e2e_p95": 361,
    "e2e_p99": 679
  },
  "latency_comparison": {
    "e2e_p95_delta_from_baseline": 49,
    "e2e_p95_delta_percent_from_baseline": 15.7,
    "stage_b_impact": 24,
    "stage_c_impact": 14
  },
  "fan_out_sizes": {
    "positives_in_candidates": 24,
    "stage_a_candidates": 1086,
    "stage_b_candidates": 298,
    "stage_c_processed": 89
  },
  "hard_negative_leakage": {
    "top_5_leakage": 0.008,
    "top_10_leakage": 0.014,
    "acceptable_threshold": 0.015
  },
  "policy_changes_applied": {
    "stage_b": {
      "pattern_packs": ["ctor_impl", "test_func_names", "config_keys"],
      "lru_bytes_budget_multiplier": 1.25,
      "batch_query_size_multiplier": 1.2
    },
    "stage_c": {
      "calibration": "isotonic_v1",
      "nl_threshold": 0.35,
      "min_candidates": 8,
      "confidence_cutoff": 0.08,
      "ann_k": 220,
      "ann_efSearch": 96,
      "new_features": ["path_prior_residual", "subtoken_jaccard", "struct_distance", "docBM25"]
    }
  },
  "errors": [
    {
      "query_id": "q_18",
      "error_type": "calibration_failure",
      "stage": "stage_c",
      "message": "Isotonic calibration failed to converge"
    }
  ]
}